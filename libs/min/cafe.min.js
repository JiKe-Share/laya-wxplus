var cafe;(function(cafe){cafe.logType=1;cafe.isZip=false;var _cid=0;function getid(target){if(target["_cid"]){return target["_cid"]}target["_cid"]=_cid;_cid++;return target["_cid"]}cafe.getid=getid})(cafe||(cafe={}));var cafe;(function(cafe){var com;(function(com){var io=(function(){function io(){}io.initTable=function(baseItems,items,hash){var fields=baseItems[0];for(var i=1;i<baseItems.length;i++){var arr=baseItems[i];var obj={};for(var j=0;j<fields.length;j++){obj[fields[j]]=arr[j]}items.push(obj);hash[arr[0]]=obj}};io.readFile=function(path){return cafe.com.too.create(function(succ,fail){Laya.loader.load(path,Laya.Handler.create(self,function(target){succ(target)}))})};io.readJson=function(path){return com.too.create(function(succ,fail){Laya.loader.load(path,Laya.Handler.create(self,function(target){var json=JSON.parse(target);succ(json)}))})};io.resHash={};io.resJsonHash={};return io}());com.io=io})(com=cafe.com||(cafe.com={}))})(cafe||(cafe={}));var cafe;(function(cafe){var com;(function(com){var too=(function(){function too(callback){this.curIdx=-1;this._callbacks=[];this._succbacks=[];this.idx=0;this.total=0;if(callback){this._callbacks[this.total]=callback}else{this._callbacks[this.total]=function(succ,fail){succ()}}this._succbacks[this.total]=null}too.create=function(callback){return new too(callback)};too.prototype.add=function(callback){this.total++;this._callbacks[this.total]=callback;return this};too.prototype.then=function(succback){this._succbacks[this.total]=succback;return this};too.prototype.error=function(failback){this._failback=failback;return this};too.prototype.start=function(){this.next();return this};too.prototype.next=function(){var self=this;if(self.curIdx==self.idx)return;try{self.curIdx=self.idx;if(self.idx>self.total)return;var call_1=self._callbacks[self.idx];call_1(function(data){self._succbacks[self.idx]&&self._succbacks[self.idx](data);self.idx++;if(self.idx<=self.total){self.next()}},function(e){self._failback&&self._failback(e)})}catch(e){serror("第"+self.idx+"步出错"+e.stack);self._failback&&self._failback("第"+self.idx+"步出错")}};return too}());com.too=too})(com=cafe.com||(cafe.com={}))})(cafe||(cafe={}));var cafe;(function(cafe){var app;(function(app){function initCafeGlobal(params){cafe.game_id=params.game_id;cafe.game_tag=params.game_tag;if(params.isZip)cafe.isZip=params.isZip;if(params.logType)cafe.logType=params.logType;if(params.table_path)cafe.table_path=params.table_path;if(params.config_path)cafe.config_path=params.config_path}app.initCafeGlobal=initCafeGlobal;function enter(){return new cafe.com.too(function(succ,fail){if(cafe.isZip){cafe.com.io.readFile("config.zip").then(function(res){app.zip=new JSZip(res);succ()}).start()}else{succ()}})}app.enter=enter})(app=cafe.app||(cafe.app={}))})(cafe||(cafe={}));var cafe;(function(cafe){var cmd;(function(cmd){var BaseCmd=(function(){function BaseCmd(TYPEID){if(TYPEID===void 0){TYPEID=0}this.desc="";this.id=TYPEID}BaseCmd.prototype.toEncodeScocketByteArray=function(){return null};BaseCmd.prototype.createBodySegment=function(){return null};BaseCmd.prototype.createBody=function(){};BaseCmd.prototype.writeUTF=function(ba,str){};BaseCmd.prototype.write64Int=function(ba,n){};BaseCmd.prototype.read64Int=function(ba){return null};return BaseCmd}());cmd.BaseCmd=BaseCmd})(cmd=cafe.cmd||(cafe.cmd={}))})(cafe||(cafe={}));var cafe;(function(cafe){var config;(function(config){var BaseConfig=(function(){function BaseConfig(name){this.exist=false;this.name=name}BaseConfig.prototype.exp=function(src,type){var self=this;switch(type){case 0:self.path=cafe.config_path+src;self.ext=".json";self.dejson();self.exist=true;break;default:break}};BaseConfig.prototype.dejson=function(){var self=this;if(cafe.isZip){var json=cafe.app.zip.file(self.path+self.ext).asText();this._table=window["JSON"]["parse"](json)}else{this._table=Laya.loader.getRes(self.path+self.ext)}};BaseConfig.prototype.table=function(){return this._table};return BaseConfig}());config.BaseConfig=BaseConfig})(config=cafe.config||(cafe.config={}))})(cafe||(cafe={}));var cafe;(function(cafe){var data;(function(data_1){var BaseData=(function(){function BaseData(name){this.isInitComplete=true;this.name=name}BaseData.prototype.readData=function(){var self=this};BaseData.prototype.register=function(){};BaseData.prototype.dispose=function(){};BaseData.prototype.invalidate=function(type,data){if(type===void 0){type="all"}if(data===void 0){data=null}var self=this;cafe.event.dispatch(self.name+"_"+type,{type:type,value:data,data:self});if(type!="all"){cafe.event.dispatch(self.name+"_all",{type:type,value:data,data:self})}};BaseData.prototype.saveData=function(){var self=this};BaseData.ALL="all";return BaseData}());data_1.BaseData=BaseData})(data=cafe.data||(cafe.data={}))})(cafe||(cafe={}));var cafe;(function(cafe){var msg;(function(msg_1){var BaseMsg=(function(){function BaseMsg(){}BaseMsg.prototype.getErrorCode=function(){return this.error};BaseMsg.prototype.getError=function(){return""};BaseMsg.prototype.read=function(r){var self=this;var b;try{b=true;var json=JSON.parse(r);if(json.error!=0){self.error=json.error;b=false}else{var list=this.getObject();for(var i=0;i<list.length;i++){self[list[i]]=json["data"][list[i]]}}}catch(e){b=false}return b};BaseMsg.prototype.wirte=function(){var self=this;try{var msg_2={};var list=this.getObject();var isUse=false;for(var i=0;i<list.length;i++){if(self[list[i]]||self[list[i]]==0){msg_2[list[i]]=self[list[i]];isUse=true}}if(!isUse)return false;self.toMsg=msg_2;self.toMsgString=JSON.stringify(msg_2)}catch(e){return false}return true};BaseMsg.prototype.toData=function(data){var self=this;try{var list=this.getObject();var isUse=false;for(var i=0;i<list.length;i++){if(self[list[i]]||self[list[i]]==0){data[list[i]]=self[list[i]];isUse=true}}if(!isUse)return false}catch(e){return false}return true};BaseMsg.prototype.getObject=function(){return null};return BaseMsg}());msg_1.BaseMsg=BaseMsg})(msg=cafe.msg||(cafe.msg={}))})(cafe||(cafe={}));var cafe;(function(cafe){var proxy;(function(proxy){var BaseProxy=(function(){function BaseProxy(name){this.name=name}BaseProxy.prototype.register=function(){};BaseProxy.prototype.dispose=function(){};return BaseProxy}());proxy.BaseProxy=BaseProxy})(proxy=cafe.proxy||(cafe.proxy={}))})(cafe||(cafe={}));var cafe;(function(cafe){var sql;(function(sql){var BaseSQL=(function(){function BaseSQL(name){this.isLocalData=false;var self=this;self.invalidates=[];self.handlers=[];self._sql={};self.sqlname=name;self.initSQL()}BaseSQL.prototype.initSQL=function(){var self=this;var list=self.changeType();for(var i=0;i<list.length;i++){var type=list[i];self._sql[type]=self.read(i)}};BaseSQL.prototype.connect=function(handler){var self=this;if(!handler){serror("连接失败，没有传回调");return}self.handlers[self.handlers.length]=handler;self.connectRef(handler)};BaseSQL.prototype.connectRef=function(handler){};BaseSQL.prototype.invalidate=function(params,changeType){if(changeType===void 0){changeType=0}var self=this;var index=self.invalidates.indexOf(changeType);if(index==-1){self.invalidates[self.invalidates.length]=changeType}for(var i=0;i<self.handlers.length;i++){var handler=self.handlers[i];handler.runWith(params)}};BaseSQL.prototype.save=function(changeType){if(changeType===void 0){changeType=0}var self=this;var change=self.changeType()[changeType];localSaveJson(self.sqlname+"_"+change,self._sql[change]);self.invalidates=[]};BaseSQL.prototype.changeType=function(){return["all"]};BaseSQL.prototype.read=function(changeType){if(changeType===void 0){changeType=0}var self=this;var change=self.changeType()[changeType];return loadLocalJson(self.sqlname+"_"+change)};return BaseSQL}());sql.BaseSQL=BaseSQL})(sql=cafe.sql||(cafe.sql={}))})(cafe||(cafe={}));var cafe;(function(cafe){var table;(function(table){var BaseTable=(function(){function BaseTable(name){this.exist=false;this.name=name}BaseTable.prototype.exp=function(src,type){var self=this;switch(type){case 0:self.path=cafe.table_path+src;self.ext=".json";self.dejson();self.exist=true;break;default:break}};BaseTable.prototype.dejson=function(){var self=this;if(cafe.isZip){var json=cafe.app.zip.file(self.path+self.ext).asText();this._tb=window["JSON"]["parse"](json)}else{this._tb=Laya.loader.getRes(self.path+self.ext)}};BaseTable.prototype.tb=function(){return this._tb};return BaseTable}());table.BaseTable=BaseTable})(table=cafe.table||(cafe.table={}))})(cafe||(cafe={}));var cafe;(function(cafe){var temp;(function(temp){var BaseTemp=(function(){function BaseTemp(name){this.NAME="";var self=this;self.NAME=name}return BaseTemp}());temp.BaseTemp=BaseTemp})(temp=cafe.temp||(cafe.temp={}))})(cafe||(cafe={}));var cafe;(function(cafe){var config;(function(config_1){function init(systems){window["systems"]=systems}config_1.init=init;function reg(config){if(!window["systems"])window["systems"]={};if(window["systems"][config.name]==null)window["systems"][config.name]=config.table()}config_1.reg=reg})(config=cafe.config||(cafe.config={}))})(cafe||(cafe={}));var cafe;(function(cafe){var data;(function(data_2){var _datas={};function reg(data){if(_datas[data.name]==null){_datas[data.name]=data}return data}data_2.reg=reg;function del(name){if(_datas[name]!=null)delete _datas[name];return null}data_2.del=del;function get(name){return _datas[name]}data_2.get=get;function has(name){return _datas[name]!=null?true:false}data_2.has=has;function on(name,func,target,changeType,isInitInvalidate){if(changeType===void 0){changeType="all"}if(isInitInvalidate===void 0){isInitInvalidate=true}cafe.event.on(name+"_"+changeType,func,target);var data=get(name);if(isInitInvalidate){call([target,func],data)}}data_2.on=on;function off(name,func,target,changeType){if(changeType===void 0){changeType="all"}cafe.event.off(name+"_"+changeType,func,target)}data_2.off=off})(data=cafe.data||(cafe.data={}))})(cafe||(cafe={}));var cafe;(function(cafe){var event;(function(event){var _evts={};var eid=0;function on(type,handler,target){if(!_evts[type]){_evts[type]={}}var gid=cafe.getid(target);if(!_evts[type][gid]){_evts[type][gid]=[target,handler]}}event.on=on;function off(type,handler,target){var gid=cafe.getid(target);if(_evts[type]&&_evts[type][gid]){delete _evts[type][gid]}}event.off=off;function dispatch(type,data){var obj=_evts[type];for(var s in obj){call(obj[s],data)}}event.dispatch=dispatch})(event=cafe.event||(cafe.event={}))})(cafe||(cafe={}));var cafe;(function(cafe){var global;(function(global){var values;function install(){values={}}global.install=install;function reg(dataname,target,valuename){values[dataname]={target:target,valuename:valuename}}global.reg=reg;function get(dataname){var data=values[dataname];if(!data.target)return null;var value=data.target[data.valuename];return value}global.get=get;function set(dataname,value){var data=values[dataname];if(!data.target)return;data.target[data.valuename]=value}global.set=set})(global=cafe.global||(cafe.global={}))})(cafe||(cafe={}));var cafe;(function(cafe){var mount;(function(mount){var _mounts={};var _mountEvts={};var _prioritys={};var _list=[];function mountOn(type,handler,target){if(!_mounts[type]){_mounts[type]={}}var gid=cafe.getid(target);if(!_mounts[type][gid]){_mounts[type][gid]=[target,handler]}}mount.mountOn=mountOn;function reg(type,priority){_prioritys[type]=priority}mount.reg=reg;function mountOff(type,handler,target){var gid=cafe.getid(target);if(_mounts[type]&&_mounts[type][gid]){delete _mounts[type][gid]}}mount.mountOff=mountOff;function mountCapture(type,data){var obj=_mounts[type];for(var s in obj){if(!call(obj[s],data)){return false}}return true}mount.mountCapture=mountCapture;function on(type,handler,target){if(!_mountEvts[type]){_mountEvts[type]={}}var gid=cafe.getid(target);if(!_mountEvts[type][gid]){_mountEvts[type][gid]=[target,handler]}}mount.on=on;function off(type,handler,target){var gid=cafe.getid(target);if(_mountEvts[type]&&_mountEvts[type][gid]){delete _mountEvts[type][gid]}}mount.off=off;function mountEvtLength(type){var num=0;for(var s in _mountEvts[type]){num++}return num}mount.mountEvtLength=mountEvtLength;function dispatch(type,data){var obj=_mounts[type];if(mountEvtLength(type)>0){_list.push({type:type,priority:_prioritys[type],time:new Date().valueOf(),data:data})}_list.sort(function(a,b){if(a.priority<b.priority){return-1}else if(a.priority>b.priority){return 1}if(a.time<b.time){return-1}else if(a.time>b.time){return 1}return 0})}mount.dispatch=dispatch;function execute(){if(_list.length<=0)return;var evtdata=_list[0];if(!mountCapture(evtdata.type,evtdata.data))return;_list.shift();var obj=_mountEvts[evtdata.type];for(var s in obj){call(obj[s],evtdata.data)}}mount.execute=execute})(mount=cafe.mount||(cafe.mount={}))})(cafe||(cafe={}));var cafe;(function(cafe){var msg;(function(msg_3){var _socket;var _protos={};function initSocket(socket){_socket=socket}msg_3.initSocket=initSocket;function reg(proto,target,func,mType){if(mType===void 0){mType=null}if(_protos[proto]!=null)return false;var protoData={};protoData.func=[target,func];protoData.mType=mType;_protos[proto]=protoData;_socket["on"](proto,function(data){serror("收到协议：",proto);domsg(proto,data)});return true}msg_3.reg=reg;function del(proto){_protos[proto]=null}msg_3.del=del;function domsg(proto,msg){if(_protos[proto]==null){trace("ID为"+proto+"的消息找不到对应的类处理");return false}var m=null;var cls=_protos[proto].mType;if(cls!=null)m=new cls();if(m!=null&&!m.read(msg)){return false}if(m==null){_protos[proto].func[1].apply(_protos[proto].func[0])}else{call(_protos[proto].func,m)}return true}msg_3.domsg=domsg})(msg=cafe.msg||(cafe.msg={}))})(cafe||(cafe={}));var cafe;(function(cafe){var proxy;(function(proxy_1){var _proxys={};function addAll(){for(var s in _proxys){_proxys[s].register()}}proxy_1.addAll=addAll;function removeAll(){for(var s in _proxys){_proxys[s].dispose()}}proxy_1.removeAll=removeAll;function reg(proxy){if(_proxys[proxy.name]==null)_proxys[proxy.name]=proxy}proxy_1.reg=reg;function get(name){return _proxys[name]}proxy_1.get=get;function has(name){return(_proxys[name]!=null)}proxy_1.has=has;function del(proxy){if(_proxys[proxy.name]!=null)delete _proxys[proxy.name]}proxy_1.del=del})(proxy=cafe.proxy||(cafe.proxy={}))})(cafe||(cafe={}));var cafe;(function(cafe){var sql;(function(sql_1){var sqls;function init(){sqls={};Laya.stage.timerLoop(5000,null,checkSQLChange)}sql_1.init=init;function reg(sql){sqls[sql.sqlname]=sql;return sql}sql_1.reg=reg;function checkSQLChange(){for(var s in sqls){var sql=sqls[s];var length=sql.invalidates.length;for(var i=0;i<length;i++){var type=sql.invalidates[i];sql.save()}sql.invalidates=[]}}sql_1.checkSQLChange=checkSQLChange})(sql=cafe.sql||(cafe.sql={}))})(cafe||(cafe={}));var cafe;(function(cafe){var table;(function(table_1){function init(tb){window["tbs"]=tb}table_1.init=init;function reg(table){if(!window["tbs"])window["tbs"]={};if(window["tbs"][table.name]==null)window["tbs"][table.name]=table}table_1.reg=reg})(table=cafe.table||(cafe.table={}))})(cafe||(cafe={}));var cafe;(function(cafe){var temp;(function(temp_1){var temps;var tempTxt;function install(){tempTxt={};temps={}}temp_1.install=install;function reg(value){temps[value.NAME]=value}temp_1.reg=reg;function setTxtValue(paramsCmd,value){var self=this;var params=paramsCmd.split("_");temps[params[0]][params[1]]=String(value)}temp_1.setTxtValue=setTxtValue;function addTxtValue(paramsCmd,value){var self=this;var params=paramsCmd.split("_");var num=Number(temps[params[0]][params[1]]);num+=Number(value);temps[params[0]][params[1]]=num.toString()}temp_1.addTxtValue=addTxtValue;function getValue(paramsCmd){var params=paramsCmd.split("_");return temps[params[0]][params[1]]}function binTxt(paramsCmd,target){var id=cafe.getid(target);if(!tempTxt[paramsCmd])tempTxt[paramsCmd]={};tempTxt[paramsCmd][id]=target;var cmdlist=paramsCmd.split("_");if(cmdlist[0]=="temp"){target.text=getValue(cmdlist[1]+"_"+cmdlist[2])}}temp_1.binTxt=binTxt;function unbinTxt(paramsCmd,target){var id=cafe.getid(target);if(!tempTxt[paramsCmd])tempTxt[paramsCmd]={};delete tempTxt[paramsCmd][id]}temp_1.unbinTxt=unbinTxt;function dispatchTxt(cmd_value,value){if(!tempTxt[cmd_value])return;for(var s in tempTxt[cmd_value]){var temp_2=tempTxt[cmd_value][s];if(typeof value=="number"){}else{temp_2.text=value}}}temp_1.dispatchTxt=dispatchTxt})(temp=cafe.temp||(cafe.temp={}))})(cafe||(cafe={}));window["getPosToAngle"]=function(startPos,endPos,isangle){if(isangle===void 0){isangle=false}var xDis=endPos.x-startPos.x;var yDis=endPos.y-startPos.y;var angle=window["Math"]["atan2"](yDis,xDis);if(isangle){angle=Math.round(angle*180/Math.PI)+90}return angle};window["getDistance"]=function(one,two){var heroX=one.x;var heroY=one.y;var thingX=two.x;var thingY=two.y;var xDis=window["Math"]["abs"](heroX-thingX);var yDis=window["Math"]["abs"](heroY-thingY);var hero2ThingDis=window["Math"]["sqrt"](xDis*xDis+yDis*yDis);return hero2ThingDis};window["getAngleToAngleE"]=function(angle){return angle*Math.PI/180};window["getAngleEToAngle"]=function(angleE){return(angleE-90)*Math.PI/180};window["posToAngleDist"]=function(one,two,angleE){if(angleE===void 0){angleE=0}var heroX=one.x;var heroY=one.y;var thingX=two.x;var thingY=two.y;var xDis=window["Math"]["abs"](heroX-thingX);var yDis=window["Math"]["abs"](heroY-thingY);var distance=window["Math"]["sqrt"](xDis*xDis+yDis*yDis);var angle=window["Math"]["atan2"](two.y-one.y,two.x-one.x);angle+=getAngleToAngleE(angleE);return{d:distance,a:angle}};window["getDistanceAngleEToPos"]=function(pos,distance,angleE){var pos1={};var angle=(angleE-90)*Math.PI/180;pos1.x=pos.x+distance*window["Math"]["cos"](angle);pos1.y=pos.y+distance*window["Math"]["sin"](angle);return pos1};window["calcAngleDist"]=function(pos,distance,angle){var pos1={};pos1.x=pos.x+distance*window["Math"]["cos"](angle);pos1.y=pos.y+distance*window["Math"]["sin"](angle);return pos1};window["getATBNextDistance"]=function(one,two,distance,isMaxDistance){if(isMaxDistance===void 0){isMaxDistance=false}var pos={};var xDis=window["Math"]["abs"](one.x-two.x);var yDis=window["Math"]["abs"](one.y-two.y);var currDistance=window["Math"]["sqrt"](xDis*xDis+yDis*yDis);if(!isMaxDistance&&currDistance<=distance){return two}xDis=two.x-one.x;yDis=two.y-one.y;var angle=window["Math"]["atan2"](yDis,xDis);pos.x=one.x+distance*window["Math"]["cos"](angle);pos.y=one.y+distance*window["Math"]["sin"](angle);return pos};window["getFishData"]=function(one,two,distance){var pos={};var xDis=two.x-one.x;var yDis=two.y-one.y;var angle=window["Math"]["atan2"](yDis,xDis);pos.x=one.x+distance*window["Math"]["cos"](angle);pos.y=one.y+distance*window["Math"]["sin"](angle);var heroX=one.x;var heroY=one.y;var thingX=two.x;var thingY=two.y;xDis=window["Math"]["abs"](heroX-thingX);yDis=window["Math"]["abs"](heroY-thingY);var todistance=window["Math"]["sqrt"](xDis*xDis+yDis*yDis);return{angle:Math.round(angle*180/Math.PI),toDistance:todistance,pos:pos}};window["abs"]=function(target){var box=target;var y=0;var x=0;var istrue=false;while(box!=null){if(istrue){y+=box.y-box.pivotY;x+=box.x-box.pivotX}else{y+=box.y;x+=box.x}istrue=true}return{x:x,y:y}};window["AREA"]=function(a,r1,b,r2){var d=Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y));if(d>=r1+r2)return 0;if(r1>r2){var tmp=r1;r1=r2;r2=tmp}if(r2-r1>=d)return Math.PI*r1*r1;var ang1=Math.acos((r1*r1+d*d-r2*r2)/(2*r1*d));var ang2=Math.acos((r2*r2+d*d-r1*r1)/(2*r2*d));return ang1*r1*r1+ang2*r2*r2-r1*d*Math.sin(ang1)};window["distBetweenPts"]=function(x1,y1,x2,y2){return Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1))};window["DistanceFromPointToLine"]=function(x,y,x1,y1,x2,y2){var a=y2-y1;var b=x1-x2;var c=x2*y1-x1*y2;return Math.abs(a*x+b*y+c)/Math.sqrt(a*a+b*b)};window["IsCircleIntersectRectangle"]=function(x,y,r,x0,y0,x1,y1,x2,y2){var w1=distBetweenPts(x0,y0,x2,y2);var h1=distBetweenPts(x0,y0,x1,y1);var w2=DistanceFromPointToLine(x,y,x0,y0,x1,y1);var h2=DistanceFromPointToLine(x,y,x0,y0,x2,y2);if(w2>w1+r)return false;if(h2>h1+r)return false;if(w2<=w1)return true;if(h2<=h1)return true;return(w2-w1)*(w2-w1)+(h2-h1)*(h2-h1)<=r*r};window["isHeroCircleInRect"]=function(pos,Ro,Ra,Rb,angle){var ox=Ro.x;var oy=Ro.y-Rb;var ax=Ro.x;var ay=oy-Rb;var bx=Ro.x+Ra;var by=oy;var od=getDistance(Ro,{x:ox,y:oy});var oa=getPosToAngle(Ro,{x:ox,y:oy});var ad=getDistance(Ro,{x:ax,y:ay});var aa=getPosToAngle(Ro,{x:ax,y:ay});var bd=getDistance(Ro,{x:bx,y:by});var ba=getPosToAngle(Ro,{x:bx,y:by});var o=calcAngleDist(Ro,od,oa+angle);var a=calcAngleDist(Ro,ad,aa+angle);var b=calcAngleDist(Ro,bd,ba+angle);return IsCircleIntersectRectangle(pos.x,pos.y,0.01,o.x,o.y,a.x,a.y,b.x,b.y)};window["absHitRect"]=function(target,toTarget){var rects=target.hitArea;if(!(rects instanceof Array)){rects=[rects]}var points=[];for(var i=0;i<rects.length;i++){var rect=rects[i];var a=new Laya.Point(rect.x,rect.y);var b=new Laya.Point(rect.width,rect.y);var c=new Laya.Point(rect.x,rect.height);var d=new Laya.Point(rect.width,rect.height);points[points.length]=toTarget.globalToLocal(target.localToGlobal(a));points[points.length]=toTarget.globalToLocal(target.localToGlobal(b));points[points.length]=toTarget.globalToLocal(target.localToGlobal(c));points[points.length]=toTarget.globalToLocal(target.localToGlobal(d))}var area=toTarget.hitArea;if(!(area instanceof Array)){area=[area]}for(var i=0;i<area.length;i++){var o=area[i];if(o.width<=0||o.height<=0)continue;for(var j=0;j<points.length;j++){var p=points[j];if(p.x>=o.x&&p.x<o.right){if(p.y>=o.y&&p.y<o.bottom){return true}}}continue}return false};window["trace"]=function(text){cafe["trace"](text)};window["slog"]=function(){var args=[];for(var _a=0;_a<arguments.length;_a++){args[_a]=arguments[_a]}if(cafe.logType!=1)return;window["console"]["log"](window["JSON"]["stringify"](args))};window["clog"]=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(cafe.logType!=1)return;window["console"]["log"](args)};window["serror"]=function(){var args=[];for(var _a=0;_a<arguments.length;_a++){args[_a]=arguments[_a]}if(cafe.logType==0)return;if(cafe.logType==1){window["console"]["error"](args)}else if(cafe.logType==2){window["console"]["error"](args)}};window["syslog"]=function(){var args=[];for(var _a=0;_a<arguments.length;_a++){args[_a]=arguments[_a]}if(cafe.logType==0)return;if(cafe.logType==1){window["console"]["warn"](window["JSON"]["stringify"](args))}else if(cafe.logType==2){window["console"]["warn"](args)}};window["call"]=function(foo,param){if(!foo)return null;if(param!=null){foo=foo.slice(0);foo.push(param)}if(isFunction(foo[0])){return foo[0].apply(null,foo.slice(1))}else if(isClass(foo[0])){return new foo[0](foo[1],foo[2],foo[3],foo[4],foo[5])}else if(isString(foo[1])){foo[0][foo[1]]=foo[2]}else if(isFunction(foo[1])){return foo[1].apply(foo[0],foo.slice(2))}};window["dejson"]=function(str){try{return window["JSON"]["parse"](str)}catch(e){return null}};window["enjson"]=function(obj){try{return window["JSON"]["stringify"](obj)}catch(e){}return null};window["int"]=function(v){if(!v)return 0;var n=v*1;if(window["isNaN"](n))return 0;if(n>=0)return Math.floor(n);return Math.ceil(n)};window["isString"]=function(v){return typeof(v)=="string"};window["isNumber"]=function(v){return v==true||v==false||typeof(v)=="number"};window["isArray"]=function(v){return v instanceof Array};window["isFunction"]=function(v){return typeof(v)=="function"&&!v["__className"]};window["isClass"]=function(v){return typeof(v)=="function"&&v["__className"]&&v["prototype"]?true:false};window["readLocal"]=function(type){return Laya.LocalStorage.getItem(cafe.game_id+"_"+cafe.game_tag+"_"+type)};window["localSave"]=function(type,content){Laya.LocalStorage.setItem(cafe.game_id+"_"+cafe.game_tag+"_"+type,content)};window["loadLocalJson"]=function(type){return Laya.LocalStorage.getJSON(cafe.game_id+"_"+cafe.game_tag+"_"+type)};window["localSaveJson"]=function(type,data){Laya.LocalStorage.setJSON(cafe.game_id+"_"+cafe.game_tag+"_"+type,data)};window["initHandler"]=function(caller,method,args,once){if(Laya.Handler["_pool"].length)return Laya.Handler["_pool"].shift().setTo(caller,method,args,once);return new Laya.Handler(caller,method,args,once)};window["cafe"]=cafe;